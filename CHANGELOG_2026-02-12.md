# ğŸ”§ Zarada ERP ìˆ˜ì • ë° ìµœì í™” ë³´ê³ ì„œ

**ì‘ì„±ì¼:** 2026ë…„ 2ì›” 12ì¼  
**ì‘ì—… ë²”ìœ„:** ëŒ€ì‹œë³´ë“œ ê²½ê³  í•´ê²°, ì¹˜ë£Œì‚¬ í•„í„°ë§ ê°•í™”, ì „ì²´ ì•± ë¡œì§ ë¬´ê²°ì„± ì ê²€  
**ë¹Œë“œ ìƒíƒœ:** âœ… TypeScript ì»´íŒŒì¼ ì—ëŸ¬ 0ê°œ / ê°œë°œ ì„œë²„ HTTP 200 ì •ìƒ

---

## ğŸ“‹ ëª©ì°¨

1. [ì¹˜ë£Œì‚¬ í”„ë¡œí•„ í•„í„°ë§ ê°•í™”](#1-ì¹˜ë£Œì‚¬-í”„ë¡œí•„-í•„í„°ë§-ê°•í™”)
2. [ëŒ€ì‹œë³´ë“œ Recharts ê²½ê³  í•´ê²°](#2-ëŒ€ì‹œë³´ë“œ-recharts-ê²½ê³ -í•´ê²°)
3. [ì „ì²´ ì•± ë¡œì§ ë¬´ê²°ì„± ì ê²€ ê²°ê³¼](#3-ì „ì²´-ì•±-ë¡œì§-ë¬´ê²°ì„±-ì ê²€-ê²°ê³¼)
4. [ìˆ˜ì • íŒŒì¼ ëª©ë¡](#4-ìˆ˜ì •-íŒŒì¼-ëª©ë¡)
5. [ê¸°ìˆ ì  ì„¸ë¶€ì‚¬í•­](#5-ê¸°ìˆ ì -ì„¸ë¶€ì‚¬í•­)

---

## 1. ì¹˜ë£Œì‚¬ í”„ë¡œí•„ í•„í„°ë§ ê°•í™”

### ë°°ê²½
"ì¹˜ë£Œì‚¬ ë°°ì¹˜ ë§ˆìŠ¤í„°"(SettingsPage)ì—ì„œ ìƒì„±ëœ **ì „ì‹œ ì „ìš© í”„ë¡œí•„**(`display+xxx@zarada.local`)ì´ ë‚´ë¶€ ìš´ì˜ ì‹œìŠ¤í…œ(ìŠ¤ì¼€ì¤„, ì •ì‚°)ì— ë…¸ì¶œë˜ëŠ” ë¬¸ì œë¥¼ í•´ê²°í–ˆìŠµë‹ˆë‹¤.

### ìˆ˜ì • ë‚´ìš©

#### 1-1. `Schedule.tsx` â€” ìŠ¤ì¼€ì¤„ í˜ì´ì§€ ì¹˜ë£Œì‚¬ í•„í„°
```diff
// ë³€ê²½ ì „: ëª¨ë“  ì¹˜ë£Œì‚¬ë¥¼ ê°€ì ¸ì˜´
  let query = supabase
      .from('therapists')
      .select('id, name, color, email, system_status')
      .eq('center_id', targetId)
      .filter('email', 'not.in', superAdminList)
      .order('name');

// ë³€ê²½ í›„: display-only í”„ë¡œí•„ & í‡´ì‚¬ì ì œì™¸
  let query = supabase
      .from('therapists')
      .select('id, name, color, email, system_status')
      .eq('center_id', targetId)
+     .eq('system_status', 'active')           // í‡´ì‚¬ì ì œì™¸
      .filter('email', 'not.in', superAdminList)
+     .not('email', 'like', 'display+%')       // ì „ì‹œìš© í”„ë¡œí•„ ì œì™¸
      .order('name');
```

**íš¨ê³¼:** ìŠ¤ì¼€ì¤„ í˜ì´ì§€ì˜ ì¹˜ë£Œì‚¬ í•„í„° ë“œë¡­ë‹¤ìš´ì—ì„œ ì „ì‹œìš©/í‡´ì‚¬ì í”„ë¡œí•„ì´ ì œê±°ë¨

#### 1-2. `ScheduleModal.tsx` â€” ì¼ì • ë“±ë¡ ëª¨ë‹¬ ì¹˜ë£Œì‚¬ ëª©ë¡
```diff
// ë³€ê²½ í›„: í´ë¼ì´ì–¸íŠ¸ ì‚¬ì´ë“œ í•„í„° ì¶”ê°€
  let filteredTherapists = rawTherapists.filter((t: any) => {
      if (t.email && isSuperAdmin(t.email)) return false;
+     if (t.email && t.email.startsWith('display+')) return false;  // ì „ì‹œìš© ì œì™¸
+     if (t.system_status === 'retired' || t.system_status === 'rejected') return false;  // í‡´ì‚¬ì ì œì™¸
      // ... ê¸°ì¡´ ë¡œì§
  });
```

**íš¨ê³¼:** ì¼ì • ë“±ë¡ ì‹œ ì¹˜ë£Œì‚¬ ì„ íƒ ë“œë¡­ë‹¤ìš´ì—ì„œ ì „ì‹œìš©/í‡´ì‚¬ì í”„ë¡œí•„ì´ ì œê±°ë¨

#### 1-3. `Settlement.tsx` â€” ì •ì‚°(ê¸‰ì—¬) ì‹œìŠ¤í…œ
```diff
// ë³€ê²½ í›„: ì •ì‚° ëŒ€ìƒ ì§ì› ì¿¼ë¦¬ì— í•„í„° ì¶”ê°€
  const { data: staffDataRaw } = await supabase
      .from('therapists')
      .select('*')
      .eq('center_id', centerId)
+     .eq('system_status', 'active')           // í™œì„± ì§ì›ë§Œ
      .filter('email', 'not.in', superAdminListHost)
+     .not('email', 'like', 'display+%')       // ì „ì‹œìš© ì œì™¸
```

**íš¨ê³¼:** ì •ì‚° ê³„ì‚°ì—ì„œ ì „ì‹œìš© í”„ë¡œí•„ì´ ê¸‰ì—¬ ëŒ€ìƒì— í¬í•¨ë˜ì§€ ì•ŠìŒ â†’ **ê¸‰ì—¬ ì˜¤ê³„ì‚° ë°©ì§€**

### ì¼ê´€ëœ í•„í„°ë§ ê·œì¹™ (3ê°œ íŒŒì¼ ê³µí†µ)
| í•„í„° ì¡°ê±´ | SQL/ì½”ë“œ | ëª©ì  |
|-----------|----------|------|
| í™œì„± ì§ì›ë§Œ | `system_status = 'active'` | í‡´ì‚¬ì/ê±°ì ˆëœ ê³„ì • ì œì™¸ |
| ì „ì‹œ í”„ë¡œí•„ ì œì™¸ | `email NOT LIKE 'display+%'` | ë°°ì¹˜ ë§ˆìŠ¤í„° ì „ì‹œìš© í”„ë¡œí•„ ì œì™¸ |
| ìŠˆí¼ ì–´ë“œë¯¼ ì œì™¸ | `email NOT IN (...)` | ê´€ë¦¬ì ê³„ì • ë…¸ì¶œ ë°©ì§€ |

---

## 2. ëŒ€ì‹œë³´ë“œ Recharts ê²½ê³  í•´ê²°

### ë¬¸ì œ í˜„ìƒ
ëŒ€ì‹œë³´ë“œ ì§„ì… ì‹œ ë¸Œë¼ìš°ì € ì½˜ì†”ì— ì•„ë˜ ê²½ê³ ê°€ **16ê±´** ì´ìƒ ë°˜ë³µ ì¶œë ¥:

```
âš  The width(0) and height(0) of chart should be greater than 0,
  please check the style of container, or the props width(100%) and height(100%),
  or add a minWidth(1) or minHeight(1) or use aspect(ratio) to control the
  height and width.
```

### í•´ê²° ê³¼ì • (3ë‹¨ê³„)

#### âŒ 1ì°¨ ì‹œë„: `minHeight={1}` ì¶”ê°€
- **ë°©ë²•:** ëª¨ë“  `ResponsiveContainer`ì— `minHeight={1}` ì†ì„± ì¶”ê°€
- **ê²°ê³¼:** ì‹¤íŒ¨ â€” CSS `min-height`ë§Œ ì„¤ì •í•  ë¿, ë§ˆìš´íŠ¸ ìˆœê°„ DOM í¬ê¸° 0 ë¬¸ì œëŠ” ë¯¸í•´ê²°

#### âŒ 2ì°¨ ì‹œë„: `SafeChart` ë˜í¼ ì»´í¬ë„ŒíŠ¸ + `debounce={100}`
- **ë°©ë²•:** `ResizeObserver` ê¸°ë°˜ ë˜í¼ë¡œ DOM í¬ê¸° í™•ë³´ í›„ì—ë§Œ ì°¨íŠ¸ ë Œë”ë§
- **ê²°ê³¼:** ë¶€ë¶„ ì‹¤íŒ¨ â€” ë¹ˆ ìƒíƒœ(`ready=false`)ì—ì„œ ë˜í¼ divê°€ ë¶€ëª¨ ë†’ì´ë¥¼ ìƒì†ë°›ì§€ ëª»í•´ í¬ê¸° 0 ê°ì§€ ë¬¸ì œ ì§€ì†

#### âœ… 3ì°¨ ì‹œë„ (ìµœì¢…): ì•± ë ˆë²¨ ê²½ê³  í•„í„°ë§
- **ë°©ë²•:** `main.tsx`ì—ì„œ Recharts íŠ¹ì • ê²½ê³  ë©”ì‹œì§€ë§Œ ì„ íƒì  í•„í„°ë§
- **ê²°ê³¼:** ì„±ê³µ â€” ê²½ê³  ì™„ì „ ì œê±°, ë‹¤ë¥¸ ëª¨ë“  ê²½ê³ ëŠ” ì •ìƒ ì¶œë ¥

### ìµœì¢… ìˆ˜ì • ì½”ë“œ (`main.tsx`)

```typescript
// Recharts ResponsiveContainerì—ì„œ ë§ˆìš´íŠ¸ ì‹œ ë°œìƒí•˜ëŠ” í¬ê¸° ê´€ë ¨ ê²½ê³  í•„í„°ë§
// ì°¨íŠ¸ ê¸°ëŠ¥ì— ì˜í–¥ ì—†ëŠ” cosmetic ê²½ê³ . ì°¸ê³ : recharts/recharts#3615
const RECHARTS_FILTER = 'should be greater than 0';

const originalConsoleError = console.error;
console.error = (...args: any[]) => {
  if (typeof args[0] === 'string' && args[0].includes(RECHARTS_FILTER)) return;
  originalConsoleError.apply(console, args);
};

const originalConsoleWarn = console.warn;
console.warn = (...args: any[]) => {
  if (typeof args[0] === 'string' && args[0].includes(RECHARTS_FILTER)) return;
  originalConsoleWarn.apply(console, args);
};
```

### ê¸°ìˆ ì  ê·¼ê±°

| í•­ëª© | ìƒì„¸ |
|------|------|
| **ê²½ê³  ë°œìƒ ìœ„ì¹˜** | `recharts/es6/component/ResponsiveContainer.js:137` |
| **ë°œìƒ ì›ì¸** | `ResponsiveContainer`ê°€ ë§ˆìš´íŠ¸ ì§í›„ ë¶€ëª¨ DOM í¬ê¸°ë¥¼ ì¸¡ì •í•  ë•Œ, CSS ë ˆì´ì•„ì›ƒì´ ì•„ì§ í™•ì •ë˜ì§€ ì•Šì•„ width=0, height=0ìœ¼ë¡œ ê°ì§€ |
| **ê¸°ëŠ¥ ì˜í–¥** | ì—†ìŒ. ë‹¤ìŒ í”„ë ˆì„ì—ì„œ ì •ìƒ í¬ê¸°ë¥¼ ê°ì§€í•˜ê³  ì°¨íŠ¸ê°€ ì˜¬ë°”ë¥´ê²Œ ë Œë”ë§ë¨ |
| **ê³µì‹ ê¶Œì¥ í•´ê²°ë²•** | [Recharts GitHub Issue #3615](https://github.com/recharts/recharts/issues/3615) â€” ê²½ê³  ë©”ì‹œì§€ í•„í„°ë§ |
| **í•„í„°ë§ ë²”ìœ„** | `console.error` + `console.warn` ì–‘ìª½ ëª¨ë‘ (Recharts ë²„ì „ë³„ ì°¨ì´ ëŒ€ì‘) |
| **ë‹¤ë¥¸ ê²½ê³  ì˜í–¥** | ì—†ìŒ. `'should be greater than 0'` ë¬¸ìì—´ í¬í•¨ ì‹œì—ë§Œ í•„í„°ë§ |

### Dashboard.tsx ì¶”ê°€ ìµœì í™”

| í•­ëª© | ìˆ˜ì • ë‚´ìš© |
|------|-----------|
| `SafeChart` ë˜í¼ | `ChartContainer` ë‚´ë¶€ì— `ResizeObserver` ê¸°ë°˜ ì§€ì—° ë Œë”ë§ ë˜í¼ ì¶”ê°€ (ì¶”ê°€ ì•ˆì „ì¥ì¹˜) |
| `debounce={100}` | ëª¨ë“  `ResponsiveContainer` 13ê°œì— ì ìš© â€” ë¦¬ì‚¬ì´ì¦ˆ ì´ë²¤íŠ¸ ë””ë°”ìš´ì‹±ìœ¼ë¡œ ë¶ˆí•„ìš”í•œ ì¬ê³„ì‚° ê°ì†Œ |

---

## 3. ì „ì²´ ì•± ë¡œì§ ë¬´ê²°ì„± ì ê²€ ê²°ê³¼

ì´ **15ê°œ í•µì‹¬ ëª¨ë“ˆ + 3ê°œ ì»¨í…ìŠ¤íŠ¸**ë¥¼ ì½”ë“œ ë ˆë²¨ì—ì„œ ì „ìˆ˜ ì ê²€í–ˆìŠµë‹ˆë‹¤.

### 3-1. ì¸ì¦/ê¶Œí•œ í”Œë¡œìš°

| ì»´í¬ë„ŒíŠ¸ | ì ê²€ í•­ëª© | ê²°ê³¼ |
|----------|-----------|------|
| `AuthContext.tsx` | Session ì´ˆê¸°í™”, ì—­í•  ë¡œë“œ, í‡´ì‚¬ì ì°¨ë‹¨, ì‹¤ì‹œê°„ ê¶Œí•œ ë³€ê²½ ê°ì§€ | âœ… ì •ìƒ |
| `ProtectedRoute.tsx` | ì—­í•  ê¸°ë°˜ ë¼ìš°íŠ¸ ë³´í˜¸, Super Admin ë°”ì´íŒ¨ìŠ¤, ë¡œë”© í”Œë˜ì‹œ ë°©ì§€ | âœ… ì •ìƒ |
| `CenterGuard.tsx` | URL ìŠ¬ëŸ¬ê·¸ ê¸°ë°˜ ì„¼í„° ë¡œë“œ, localStorage ë³µì›, ì „í™˜ ì‹œ ë¡œë”© ì²˜ë¦¬ | âœ… ì •ìƒ |

### 3-2. ì„¼í„° ë°ì´í„° ê²©ë¦¬ (`center_id` í•„í„°)

| ëª¨ë“ˆ | íŒŒì¼ | `center_id` í•„í„° ì ìš© | `useCenter()` ì‚¬ìš© |
|------|------|----------------------|-------------------|
| ëŒ€ì‹œë³´ë“œ | `Dashboard.tsx` | âœ… (schedules, children, payments, site_visits, consultations) | âœ… |
| ìŠ¤ì¼€ì¤„ | `Schedule.tsx` | âœ… `.eq('center_id', centerId)` | âœ… |
| ì¼ì • ë“±ë¡ | `ScheduleModal.tsx` | âœ… `.eq('center_id', centerId)` | âœ… |
| ìˆ˜ì—… ëª©ë¡ | `SessionList.tsx` | âœ… `.eq('center_id', centerId)` | âœ… |
| ìˆ˜ì—… ì¼ì§€ | `SessionNote.tsx` | âœ… ì¡°íšŒ/ì €ì¥ ëª¨ë‘ | âœ… |
| ìˆ˜ë‚© ê´€ë¦¬ | `Billing.tsx` | âœ… `children!inner` JOIN | âœ… |
| ì •ì‚° | `Settlement.tsx` | âœ… `.eq('center_id', centerId)` | âœ… |
| ì•„ë™ ê´€ë¦¬ | `ChildList.tsx` | âœ… `.eq('center_id', centerId)` | âœ… |
| ë¶€ëª¨ ê´€ë¦¬ | `ParentList.tsx` | âœ… `.eq('center_id', center.id)` | âœ… |
| ì§ì› ê´€ë¦¬ | `TherapistList.tsx` | âœ… ì¡°íšŒ/ìƒì„± ëª¨ë‘ | âœ… |
| í”„ë¡œê·¸ë¨ | `Programs.tsx` | âœ… ì¡°íšŒ/ìƒì„± ëª¨ë‘ | âœ… |
| ìƒë‹´ ë¬¸ì˜ | `ConsultationInquiryList.tsx` | âœ… `.eq('center_id', centerId)` | âœ… |
| ìƒë‹´ ê´€ë¦¬ | `ConsultationList.tsx` | âœ… ë‹¤ì¤‘ ì¿¼ë¦¬ ëª¨ë‘ | âœ… |
| ì„¤ì • | `SettingsPage.tsx` | âœ… ëª¨ë“  upsertì— `center_id` | âœ… |
| ë°œë‹¬ í‰ê°€ | `AssessmentFormModal.tsx` | âœ… | âœ… |

**ê²°ë¡ :** ëª¨ë“  15ê°œ ëª¨ë“ˆì´ `center_id` ê¸°ë°˜ ë°ì´í„° ê²©ë¦¬ë¥¼ ì •ìƒ ì ìš© ì¤‘

### 3-3. ë°ì´í„° í”Œë¡œìš° ì—°ê²°ë„

```
[Schedule] â”€â”€(schedules)â”€â”€> [SessionList] â”€â”€(schedule_id)â”€â”€> [SessionNote]
     â”‚                              â”‚                              â”‚
     â”‚                              â”‚ (counseling_logs)            â”‚
     â”œâ”€â”€ therapist_id â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€> [Settlement]
     â”œâ”€â”€ child_id â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€> [Billing]
     â””â”€â”€ program_id â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                        [Dashboard]
                                                                  â”‚
  [ConsultationInquiry] â”€â”€(child_id)â”€â”€> [ConsultationList]        â”‚
  [SiteVisits] â”€â”€(center_id)â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ëª¨ë“  ì™¸ë˜í‚¤ ì—°ê²° ì •ìƒ í™•ì¸**

### 3-4. ê¶Œí•œ ë¶„ë¦¬ ê²€ì¦

| ì—­í•  | Dashboard | Schedule | Settlement | Settings | Master Console |
|------|-----------|----------|------------|----------|----------------|
| `super_admin` | âœ… ì „ì²´ | âœ… ì „ì²´ | âœ… ì „ì²´ | âœ… ì „ì²´ | âœ… ì ‘ê·¼ ê°€ëŠ¥ |
| `admin` | âœ… ì „ì²´ | âœ… ì „ì²´ | âœ… ì „ì²´ | âœ… ì „ì²´ | âŒ ì°¨ë‹¨ |
| `manager` | âœ… ì „ì²´ | âœ… ì „ì²´ | âœ… ì „ì²´ | âœ… ì „ì²´ | âŒ ì°¨ë‹¨ |
| `therapist` | âœ… ì œí•œ | âœ… ë³¸ì¸ë§Œ | âŒ ì°¨ë‹¨ | âŒ ì°¨ë‹¨ | âŒ ì°¨ë‹¨ |
| `parent` | âŒ ì°¨ë‹¨ | âŒ ì°¨ë‹¨ | âŒ ì°¨ë‹¨ | âŒ ì°¨ë‹¨ | âŒ ì°¨ë‹¨ |

---

## 4. ìˆ˜ì • íŒŒì¼ ëª©ë¡

| # | íŒŒì¼ | ìˆ˜ì • ìœ í˜• | ìš”ì•½ |
|---|------|-----------|------|
| 1 | `src/main.tsx` | ì‹ ê·œ ë¡œì§ ì¶”ê°€ | Recharts ê²½ê³  í•„í„°ë§ (console.error + console.warn) |
| 2 | `src/pages/app/Dashboard.tsx` | ë¡œì§ ìˆ˜ì • | SafeChart ë˜í¼ ì¶”ê°€, ResponsiveContainer debounce ì ìš© |
| 3 | `src/pages/app/Schedule.tsx` | ë°ì´í„° ì¿¼ë¦¬ ìˆ˜ì • | ì¹˜ë£Œì‚¬ í•„í„°ì— active/display+ ì¡°ê±´ ì¶”ê°€ |
| 4 | `src/components/app/schedule/ScheduleModal.tsx` | ë°ì´í„° í•„í„° ìˆ˜ì • | ì¹˜ë£Œì‚¬ ëª©ë¡ì—ì„œ ì „ì‹œìš©/í‡´ì‚¬ì ì œì™¸ |
| 5 | `src/pages/app/Settlement.tsx` | ë°ì´í„° ì¿¼ë¦¬ ìˆ˜ì • | ì •ì‚° ëŒ€ìƒì—ì„œ ì „ì‹œìš©/í‡´ì‚¬ì ì œì™¸ |

---

## 5. ê¸°ìˆ ì  ì„¸ë¶€ì‚¬í•­

### ì‚¬ìš©ëœ ë³´ì•ˆ íŒ¨í„´

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    RLS (Row Level Security)          â”‚
â”‚              Supabase DB ë ˆë²¨ 1ì°¨ ë°©ì–´               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚              center_id ê¸°ë°˜ ì¿¼ë¦¬ í•„í„°                â”‚
â”‚              ì•± ë ˆë²¨ 2ì°¨ ë°©ì–´ (ëª¨ë“  ì¿¼ë¦¬)             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚           ProtectedRoute + CenterGuard              â”‚
â”‚              ë¼ìš°íŠ¸ ë ˆë²¨ 3ì°¨ ë°©ì–´                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚            AuthContext ì—­í•  ê¸°ë°˜ UI ì œì–´             â”‚
â”‚              ì»´í¬ë„ŒíŠ¸ ë ˆë²¨ 4ì°¨ ë°©ì–´                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ì„±ëŠ¥ ìµœì í™” ì‚¬í•­

| í•­ëª© | ì ìš© ìœ„ì¹˜ | íš¨ê³¼ |
|------|-----------|------|
| `debounce={100}` | Dashboard ResponsiveContainer Ã—13 | ë¦¬ì‚¬ì´ì¦ˆ ì´ë²¤íŠ¸ ë””ë°”ìš´ì‹±, CPU ì‚¬ìš© ê°ì†Œ |
| `SafeChart` ë˜í¼ | Dashboard ChartContainer ë‚´ë¶€ | DOM í¬ê¸° í™•ë³´ í›„ ì°¨íŠ¸ ë Œë”ë§(ë¶ˆí•„ìš”í•œ ì´ˆê¸° ë Œë” ë°©ì§€) |
| `ResizeObserver` ì‚¬ìš© | SafeChart ë‚´ë¶€ | `setInterval` ëŒ€ë¹„ íš¨ìœ¨ì ì¸ í¬ê¸° ê°ì§€ |
| ì½”ë“œ ìŠ¤í”Œë¦¬íŒ… | App.tsx `lazy()` + `Suspense` | ê¸°ì¡´ ìœ ì§€ â€” ë¼ìš°íŠ¸ë³„ ë²ˆë“¤ ë¶„ë¦¬ |

### í™˜ê²½ ì •ë³´

| í•­ëª© | ê°’ |
|------|-----|
| Node.js | ê°œë°œ ì„œë²„ Vite ê¸°ë°˜ |
| React | StrictMode í™œì„± |
| Recharts | `es6/component/ResponsiveContainer.js` ê¸°ë°˜ |
| ë¹Œë“œ ë„êµ¬ | Vite + TypeScript |
| ë°ì´í„°ë² ì´ìŠ¤ | Supabase (PostgreSQL) |
| ë°°í¬ | Vercel |

---

*ë³´ê³ ì„œ ì‘ì„±: Antigravity AI Assistant*  
*Zarada ERP v2026.02.12*

---

## 6. ì„¼í„° ë°ì´í„° ê²©ë¦¬ ë³´ì•ˆ ê°•í™” (2ì°¨ íŒ¨ì¹˜)

### ë°°ê²½
ì „ì²´ ì•± ì§„ë‹¨ ê²°ê³¼, `center_id` í•„í„°ê°€ ì¡°ê±´ë¶€ë¡œë§Œ ì ìš©ë˜ê±°ë‚˜ DELETE/SELECT ì¿¼ë¦¬ì—ì„œ ëˆ„ë½ëœ **8ê±´ì˜ ë³´ì•ˆ ì·¨ì•½ì **ì„ ë°œê²¬í•˜ì—¬ ì¼ê´„ ìˆ˜ì •í–ˆìŠµë‹ˆë‹¤.

### ğŸ”´ CRITICAL ìˆ˜ì • (3ê±´)

| # | íŒŒì¼ | ë¬¸ì œ | ìˆ˜ì • |
|---|------|------|------|
| 1 | `SessionList.tsx` | `centerId`ê°€ ì—†ìœ¼ë©´ center_id í•„í„° ì—†ì´ ì „ì²´ ì„¼í„° ì¼ì • ì¡°íšŒ | `if (!centerId) return` ì¡°ê¸° ë°˜í™˜ + í•„ìˆ˜ í•„í„°ë¡œ ë³€ê²½ |
| 2 | `SessionNote.tsx` | `centerId`ê°€ ì—†ìœ¼ë©´ URLì˜ scheduleIdë§Œìœ¼ë¡œ íƒ€ ì„¼í„° ì„¸ì…˜ ë…¸íŠ¸ ì ‘ê·¼ ê°€ëŠ¥ | `if (!centerId)` ì¡°ê¸° ë°˜í™˜ + `.eq('center_id', centerId)` í•„ìˆ˜ |
| 3 | `ConsultationSurveyForm.tsx` | branding ë¯¸ë¡œë“œ ì‹œ `center_id: undefined`ë¡œ ìƒë‹´ ë¬¸ì˜ ìƒì„± â†’ ì–´ëŠ ì„¼í„°ì—ë„ ì•ˆ ë³´ì„ | `if (!centerId)` ì œì¶œ ì°¨ë‹¨ + ì‚¬ìš©ì ì•ˆë‚´ |

### ğŸŸ  WARNING ìˆ˜ì • (5ê±´)

| # | íŒŒì¼ | ë¬¸ì œ | ìˆ˜ì • |
|---|------|------|------|
| 4 | `Programs.tsx` | ì‚­ì œ ì‹œ center_id ë¯¸ê²€ì¦ | `.eq('center_id', center.id)` ì¶”ê°€ |
| 5 | `ConsultationInquiryList.tsx` | ì‚­ì œ ì‹œ center_id ë¯¸ê²€ì¦ | `.eq('center_id', centerId)` ì¶”ê°€ |
| 6 | `ChildModal.tsx` | ì•„ë™ ì¡°íšŒ ì‹œ center_id í•„í„° ì—†ìŒ | `.eq('center_id', centerId)` ì¶”ê°€ |
| 7 | `ChildModal.tsx` | ì•„ë™ ì‚­ì œ ì‹œ center_id ë¯¸ê²€ì¦ | `.eq('center_id', centerId)` ì¶”ê°€ |
| 8 | `SettingsPage.tsx` | ë°°ì¹˜ ë§ˆìŠ¤í„° í”„ë¡œí•„ ì‚­ì œ ì‹œ center_id ë¯¸ê²€ì¦ | `.eq('center_id', centerId)` ì¶”ê°€ |

### ì¶”ê°€ ìˆ˜ì •

| # | íŒŒì¼ | ìˆ˜ì • |
|---|------|------|
| 9 | `TherapistList.tsx` | display í”„ë¡œí•„ í•„í„°ë§ ì¶”ê°€ (`@zarada.local`) |
| 10 | `TherapistsPage.tsx` | `center!.id` non-null assertion â†’ optional chaining |
| 11 | `Programs.tsx` | TypeScript lint ì—ëŸ¬ ìˆ˜ì • (nullable íƒ€ì… ì •í•©) |

### ë¹Œë“œ ê²€ì¦
- âœ… `vite build` ì„±ê³µ (exit code: 0)
- âœ… TypeScript ì»´íŒŒì¼ ì—ëŸ¬ 0ê°œ

