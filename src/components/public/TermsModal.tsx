import { X } from 'lucide-react';
import { useAdminSettings } from '@/hooks/useAdminSettings';

export function TermsModal({ isOpen, onClose, type = 'terms' }: { isOpen: boolean; onClose: () => void; type: 'terms' | 'privacy' }) {
    // ✨ [Hook Order Fix] All hooks MUST be called before any early return
    const { getSetting } = useAdminSettings();
    const centerName = getSetting('center_name') || 'Zarada';

    if (!isOpen) return null;

    return (
        <div className="fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm" onClick={onClose}>
            <div className="bg-white p-8 rounded-3xl w-full max-w-lg max-h-[80vh] overflow-y-auto" onClick={e => e.stopPropagation()}>
                <div className="flex justify-between items-center mb-6">
                    <h2 className="text-xl font-black">{type === 'terms' ? '이용약관' : '개인정보 처리방침'}</h2>
                    <button onClick={onClose}><X className="w-6 h-6" /></button>
                </div>
                <div className="prose prose-sm text-slate-600 leading-relaxed font-medium">
                    {type === 'terms' ? (
                        <>
                            <h3>제1조 (목적)</h3>
                            <p>본 약관은 {centerName}(이하 "센터")가 제공하는 서비스의 이용조건 및 절차, 이용자와 센터의 권리, 의무, 책임사항을 규정함을 목적으로 합니다.</p>

                            <h3>제2조 (약관의 효력)</h3>
                            <p>본 약관은 서비스를 이용하고자 하는 모든 회원에게 적용됩니다. 약관의 내용은 서비스 화면에 게시하거나 기타의 방법으로 회원에게 공지함으로써 효력을 발생합니다.</p>

                            <h3>제3조 (용어의 정의)</h3>
                            <p>① "서비스"란 센터가 제공하는 온라인 예약, 상담, 아동 발달 관리 및 관련 부가 기능을 의미합니다.</p>
                            <p>② "회원"이란 본 약관에 동의하고 회원가입을 완료한 보호자 및 관련 이용자를 말합니다.</p>
                            <p>③ "아동 정보"란 치료 및 상담 서비스 제공을 위해 수집되는 아동의 이름, 생년월일, 성별 등의 정보를 말합니다.</p>

                            <h3>제4조 (서비스의 제공 및 변경)</h3>
                            <p>① 센터는 다음과 같은 서비스를 제공합니다: 온라인 상담 예약, 수업 일정 확인, 발달 평가 기록 조회, 공지사항 확인 등.</p>
                            <p>② 센터는 서비스의 내용을 변경할 수 있으며, 변경 시 사전에 공지합니다.</p>

                            <h3>제5조 (서비스의 중단)</h3>
                            <p>센터는 시스템 점검, 설비 보수, 천재지변 등 불가피한 사유가 발생한 경우 서비스의 제공을 일시적으로 중단할 수 있으며, 이 경우 사전 또는 사후에 공지합니다.</p>

                            <h3>제6조 (회원가입)</h3>
                            <p>① 이용자는 센터가 정한 가입 절차에 따라 회원가입을 신청합니다.</p>
                            <p>② 센터는 다음 각 호에 해당하는 신청에 대해서는 승인을 거부할 수 있습니다: 허위 정보 기재, 타인 명의 사용, 기타 부정한 목적의 신청 등.</p>

                            <h3>제7조 (회원 탈퇴 및 자격 상실)</h3>
                            <p>① 회원은 언제든지 탈퇴를 요청할 수 있으며, 센터는 즉시 처리합니다.</p>
                            <p>② 탈퇴 시 관련 법령에 따라 일정 기간 개인정보가 보관될 수 있습니다.</p>

                            <h3>제8조 (회원의 의무)</h3>
                            <p>① 회원은 정확한 정보를 기재해야 하며, 변경 사항 발생 시 즉시 수정해야 합니다.</p>
                            <p>② 회원은 타인의 개인정보를 부정하게 사용해서는 안 됩니다.</p>

                            <h3>제9조 (센터의 의무)</h3>
                            <p>① 센터는 관련 법령을 준수하며, 안정적인 서비스 제공을 위해 노력합니다.</p>
                            <p>② 센터는 회원의 개인정보를 보호하며, 개인정보 처리방침에 따라 관리합니다.</p>

                            <h3>제10조 (면책 조항)</h3>
                            <p>① 센터는 천재지변, 전쟁, 기간통신사업자의 서비스 중단 등 불가항력적 사유로 인한 서비스 제공 불가에 대해 책임을 지지 않습니다.</p>
                            <p>② 회원이 자신의 계정 정보 관리를 소홀히 하여 발생한 손해에 대해 센터는 책임을 지지 않습니다.</p>

                            <h3>제11조 (분쟁 해결)</h3>
                            <p>본 약관과 관련된 분쟁은 센터 소재지 관할 법원을 제1심 전속 관할 법원으로 합니다.</p>

                            <p className="text-xs text-slate-400 mt-6">본 약관은 2026년 1월 1일부터 시행합니다.</p>
                        </>
                    ) : (
                        <>
                            <h3>1. 개인정보의 수집 및 이용 목적</h3>
                            <p>{centerName}은(는) 회원가입, 상담 예약, 서비스 신청 등을 위해 아래와 같은 개인정보를 수집합니다.</p>
                            <ul>
                                <li>회원 관리: 본인 확인, 서비스 이용 및 상담 예약 처리</li>
                                <li>서비스 제공: 아동 발달 평가, 수업 일정 관리, 치료 기록 관리</li>
                                <li>고충 처리: 민원 접수 및 처리, 분쟁 조정을 위한 기록 보존</li>
                            </ul>

                            <h3>2. 수집하는 개인정보 항목</h3>
                            <p><strong>필수 항목:</strong> 이름, 전화번호, 이메일</p>
                            <p><strong>자녀 정보:</strong> 이름, 생년월일, 성별</p>
                            <p><strong>자동 수집 항목:</strong> 접속 IP, 접속 일시, 서비스 이용 기록</p>

                            <h3>3. 개인정보의 보유 및 이용기간</h3>
                            <p>① 회원 탈퇴 시 지체 없이 파기합니다. 단, 관련 법령에 의해 보존이 필요한 경우 해당 기간 동안 보관합니다.</p>
                            <ul>
                                <li>계약 또는 청약철회 등에 관한 기록: 5년 (전자상거래법)</li>
                                <li>소비자 불만 또는 분쟁 처리에 관한 기록: 3년 (전자상거래법)</li>
                                <li>웹사이트 방문 기록: 3개월 (통신비밀보호법)</li>
                            </ul>

                            <h3>4. 개인정보의 제3자 제공</h3>
                            <p>{centerName}은(는) 원칙적으로 이용자의 개인정보를 외부에 제공하지 않습니다. 다만, 다음의 경우 예외로 합니다.</p>
                            <ul>
                                <li>이용자가 사전에 동의한 경우</li>
                                <li>법령의 규정에 의하거나, 수사 목적으로 법령에 정해진 절차와 방법에 따라 수사기관의 요구가 있는 경우</li>
                            </ul>

                            <h3>5. 개인정보의 파기 절차 및 방법</h3>
                            <p>① 파기 절차: 이용 목적이 달성된 후 별도의 DB로 이동하여 내부 방침 및 관련 법령에 따라 일정 기간 저장된 후 파기됩니다.</p>
                            <p>② 파기 방법: 전자적 파일의 경우 복구 불가능한 방법으로 영구 삭제하며, 종이 문서의 경우 분쇄기로 분쇄하거나 소각합니다.</p>

                            <h3>6. 이용자 및 법정대리인의 권리와 행사 방법</h3>
                            <p>① 이용자는 언제든지 자신의 개인정보를 조회하거나 수정할 수 있습니다.</p>
                            <p>② 만 14세 미만 아동의 개인정보는 법정대리인의 동의를 기반으로 처리되며, 법정대리인은 아동의 개인정보에 대한 열람, 정정, 삭제, 처리정지를 요구할 수 있습니다.</p>

                            <h3>7. 개인정보 보호 책임자</h3>
                            <p>{centerName}은(는) 개인정보 처리에 관한 업무를 총괄하는 개인정보 보호 책임자를 지정합니다. 개인정보와 관련된 문의사항은 센터 대표 연락처로 연락해 주시기 바랍니다.</p>

                            <h3>8. 개인정보의 안정성 확보 조치</h3>
                            <p>{centerName}은(는) 개인정보의 안전성 확보를 위해 다음과 같은 조치를 취하고 있습니다.</p>
                            <ul>
                                <li>개인정보 취급 직원의 최소화 및 교육</li>
                                <li>개인정보에 대한 접근 제한 및 접근 권한 관리</li>
                                <li>개인정보의 암호화 (SSL/TLS 통신 암호화)</li>
                                <li>해킹 등에 대비한 기술적 대책 (방화벽, 침입탐지시스템 등)</li>
                            </ul>

                            <h3>9. 개인정보 처리방침 변경</h3>
                            <p>본 개인정보 처리방침은 법령 및 방침에 따라 변경될 수 있으며, 변경 시 서비스 내 공지사항을 통해 안내합니다.</p>

                            <p className="text-xs text-slate-400 mt-6">본 방침은 2026년 1월 1일부터 시행합니다.</p>
                        </>
                    )}
                </div>
                <div className="mt-8 pt-6 border-t">
                    <button onClick={onClose} className="w-full py-4 bg-slate-900 text-white font-bold rounded-2xl">확인했습니다</button>
                </div>
            </div>
        </div>
    );
}
